# ToyRobot

![Toy Robot generated by Dall-E 3](toy_robot.jpg)

This project is created to showcase my proposed technical solution to the fun problem described in [SPECIFICATION.md](./SPECIFICATION.md).

It is a CLI (command line interface) written in Ruby v3.0.6 with the help of Bundler v.2.4.22.

It contains all the elements that I would use to make this production-quality.

It also contains some of the technical design/concepts:

* object-oriented programming
* separation of concerns
* CI/CD
* automated tests
* MVC pattern
* error handling
* logging
* use of existing gems that's thriving instead of reinventing the wheel


# Usage

There are three ways to run this CLI:

1. Install as local gem

   Requirement:

   * Ruby v3.0.6 onwards
   * RVM / rbenv would be helpful

2. Use [`bundler`](https://bundler.io/)

    Requirement:

    * Ruby v3.0.6 onwards
    * RVM / rbenv would be helpful
    * Bundler v2 onwards

3. Use `docker`

    Requirement:

    * docker client

Before continuing, please clone the [repository](https://github.com/okarsono/toy_robot/) to your machine.

## Installation as local gem

*Note: if you want to use `bundle` or `docker` to run this CLI, please skip this section.*

```bash
cd <toy_robot_folder>
gem build toy_robot.gemspec
gem install toy_robot
```

Once installed, to run:

```bash
toy_robot play
```

## Using Bundler

```bash
cd <toy_robot_folder>
bundle install
```

Afterwards, to run:

```bash
bundle exec toy_robot play
```

## Using Docker

```bash
cd <toy_robot_folder>
docker build -t toy_robot_octa .
```

And to run the docker image as a container:

```bash
docker run --name toy_robot_octa -it toy_robot_octa toy_robot play
```

To restart the container, you'll have to remove the container first before rerunning the above command:

```bash
docker remove toy_robot_octa
```

## Execution options

The default size of the game board is `5x5`. This size can be configured/overridden via two environment variables:

* `BOARD_WIDTH`
* `BOARD_HEIGHT`

The value of each environment variable needs to be a positive integer. Setting the value to a non-positive integer
will result in inability to place the robot on the board.
Setting the value to a non-numeric value will result in the default value being used (`5`)

If you run the CLI as local gem or via `bundle exec` method, then the easiest way is to define these env variables
when running the CLI:


* Local gem:

  ```bash
  BOARD_WIDTH=10 BOARD_HEIGHT=10 toy_robot play
  ```

* `bundle exec`:

   ```bash
   BOARD_WIDTH=10 BOARD_HEIGHT=10 bundle exec toy_robot play
   ```

* docker image:

   You can override the value by editing `robot.env` file before running `docker run`:

   ```bash
   docker run --env-file=robot.env --name toy_robot_octa -it toy_robot_octa toy_robot play
   ```


## Development

After checking out the repo, run `bundle install` to install dependencies. Then, run `bundle exec rake spec` to run the tests. You can also run `bin/console` for an interactive prompt that will allow you to experiment.

To install this gem onto your local machine, run `bundle exec rake install`. To release a new version, update the version number in `version.rb`, and then run `bundle exec rake release`, which will create a git tag for the version, push git commits and the created tag, and push the `.gem` file to [rubygems.org](https://rubygems.org).

## Dev Notes

### Adding/implementing a new command for robot

Below are steps to implement a new command for the robot:

1. Add the command to `lib/toy_robot/command.rb`, in either `SIMPLE_COMMANDS` or `COMPLEX_COMMANDS` (if the new command accepts argument(s)).
2. If the new command accepts argument(s), then please define `try_<command_name>_command` class method in `lib/toy_robot/command_validator.rb`. This method takes in user input as string format and should try to convert it to the actual command object.
3. Implement method of the same name as the command to `lib/toy_robot/robot.rb`
4. Add help/description for the new command in `config/locales/en.yml`
5. Write unit testing in `spec/toy_robot/robot_spec.rb`

## Contributing

Bug reports and pull requests are welcome on GitHub at https://github.com/okarsono/toy_robot.

## License

The gem is available as open source under the terms of the [MIT License](https://opensource.org/licenses/MIT).
